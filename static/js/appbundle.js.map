{
  "version": 3,
  "sources": ["index.ts", "modal.ts", "syntaxModesRules.ts", "teachers.ts", "auth.ts", "app.ts", "tabs.ts", "translating.ts"],
  "sourcesContent": ["export * from './modal';\nexport * from './app';\nexport * from './auth';\nimport './syntaxModesRules';\nimport './tabs';\nimport './translating';\nexport * from './teachers';", "/**\n * The modal we pop up to have children confirm things\n */\nclass Modal {\n  constructor() {\n    // Just one binding, never needs stat\n    $('#modal-confirm-button').on('click', () => this.hide());\n    $('#modal-no-button').on('click', () => this.hide());\n    $('#modal-cancel-button').on('click', () => this.hide());\n  }\n\n  public show() {\n    $('#modal-mask').show();\n    $('#modal-content').show();\n    window.scrollTo(0, 0);\n  }\n\n  public hide() {\n    $('#modal-mask').hide();\n    $('#modal-content').hide();\n    $('#modal-alert').hide();\n    $('#modal-prompt').hide();\n    $('#modal-confirm').hide();\n  }\n\n  public alert(message: string, timeoutMs?: number) {\n    $('#modal-alert-text').text(message);\n    this.show();\n    $('#modal-alert').show();\n    if (timeoutMs) setTimeout(() => this.hide(), timeoutMs);\n  }\n\n  public confirm(message: string, confirmCb: () => void) {\n    $('#modal-confirm-text').text(message);\n    this.show();\n    $('#modal-confirm').show();\n\n    // Since we need to close over the callback, replace the handler\n    $('#modal-yes-button').off('click').on('click', () => {\n      this.hide();\n      confirmCb();\n    });\n  }\n\n  public prompt(message: string, defaultValue: string, confirmCb: (x: string) => void) {\n    $('#modal-prompt-text').text(message);\n    this.show();\n    $('#modal-prompt').show();\n    if (defaultValue) $('#modal-prompt-input').val(defaultValue);\n\n    // Since we need to close over the callback, replace the handler\n    $('#modal-ok-button').off('click').on('click', () => {\n      this.hide();\n\n      const value = $('#modal-prompt-input').val();\n      if (typeof value === 'string') {\n        confirmCb(value);\n      }\n    });\n  }\n}\n\nlet editor: AceAjax.Editor | undefined;\n\n/**\n * The error that appears underneath the code editor\n */\nexport const error = {\n  setEditor(e: AceAjax.Editor) {\n    editor = e;\n  },\n\n  hide() {\n    $('#errorbox').hide();\n    $('#warningbox').hide();\n    editor?.resize();\n  },\n\n  showWarning(caption: string, message: string) {\n    $('#warningbox .caption').text(caption);\n    $('#warningbox .details').text(message);\n    $('#warningbox').show();\n    editor?.resize();\n  },\n\n  show(caption: string, message: string) {\n    $('#errorbox .caption').text(caption);\n    $('#errorbox .details').text(message);\n    $('#errorbox').show();\n    editor?.resize();\n  }\n}\n\nexport const modal = new Modal();\n", "interface Rule {\n  readonly regex: string;\n  readonly token: string | string[];\n  readonly next?: string;\n}\n\ntype Rules = Record<string, Rule[]>;\n\n// Basic highlighter rules we can use in most levels\n// - Highlighters always begin in the 'start' state, and see line by line (no newlines!)\n// - We try to recognize as many commands and tokens as possible in 'start', only deviating\n//   to another state to avoid highlighting something.\n// - 'expression_eol' is the state to contain arbitrary values that will always eat the rest of the line\n// - 'gobble' is the state that will eat whatever is left in the line and go back to 'start'\nfunction baseRules(): Rules {\n  return {\n    // gobble is a state in which we can read anything (.*), used after print\n    gobble: [\n      {\n        regex: '.*',\n        token: 'text',\n        next: 'start',\n      }\n    ],\n\n    // this function creates two rules, one to recognize strings and at random within a line (staying in the same state)\n    // and one where it is recognized at the end of the line (going back to start)\n    expression_eol: finishLine([\n      {\n        regex: \"'[^']*'\",\n        token: 'constant.character',\n      },\n      {\n        regex: 'at random',\n        token: 'keyword'\n      },\n      {\n        regex: '$', // $ matches with end of line\n        token: 'text',\n      },\n    ]),\n  };\n}\n\nconst LEVELS = [\n  {\n    name: 'level1',\n    rules: pipe(baseRules(),\n      rule_printSpace('gobble'),\n      rule_turtle(),\n      recognize('start', {\n        regex: keywordWithSpace('echo'),\n        token: 'keyword',\n        next: 'gobble',\n      }),\n      recognize('start', {\n        regex: keywordWithSpace('ask'),\n        token: 'keyword',\n        next: 'gobble',\n      }),\n    ),\n  },\n  {\n    // Adds lists and 'at random'\n    name: 'level2',\n    rules: pipe(baseRules(),\n\n      rule_printSpace('expression_eol'),\n      rule_isAsk('gobble'),\n      rule_is('gobble'),\n\n      rule_turtle(),\n\n    ),\n  },\n  {\n    // Adds quoted text\n    name: 'level3',\n    rules: pipe(baseRules(),\n      rule_turtle(),\n      rule_printSpace('expression_eol'),\n      rule_isAsk(),\n      rule_is(),\n    ),\n  },\n  {\n    // Adds if/else\n    name: 'level4',\n    rules: pipe(baseRules(),\n      rule_printSpace(),\n      rule_isAsk(),\n      rule_is(),\n      rule_ifElseOneLine(),\n      rule_expressions(),\n    ),\n  },\n  {\n    // Adds repeat\n    name: 'level5',\n    rules: pipe(baseRules(),\n      rule_printSpace(),\n      rule_isAsk(),\n      rule_is(),\n      rule_ifElseOneLine(),\n      rule_expressions(),\n      rule_repeat(),\n    ),\n  },\n  {\n    // Adds arithmetic\n    name: 'level6',\n    rules: pipe(baseRules(),\n      rule_printSpace(),\n      rule_isAsk(),\n      rule_is(),\n      rule_ifElseOneLine(),\n      rule_expressions(),\n      rule_repeat(),\n      rule_arithmetic(),\n    ),\n  },\n  {\n    // Adds indented blocks -- no changes to highlighter necessary\n    name: 'level7',\n    rules: pipe(baseRules(),\n      rule_printSpace(),\n      rule_isAsk(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_repeat(),\n      rule_arithmetic(),\n    ),\n  },\n  {\n    // Replaces 'repeat' with 'for'\n    name: 'level8',\n    rules: pipe(baseRules(),\n      rule_printSpace(),\n      rule_isAsk(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_arithmetic(),\n      rule_for()\n    ),\n  },\n  {\n    // Replaces 'repeat' with 'for'\n    name: 'level9and10',\n    rules: pipe(baseRules(),\n      rule_printSpace(),\n      rule_isAsk(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_arithmetic(),\n      rule_forRange(),\n      rule_for()\n    ),\n  },\n  {\n    // Nesting of 'for' loops (no changes necessary)\n    name: 'level11',\n    rules: pipe(baseRules(),\n      rule_printSpace(),\n      rule_isAsk(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_arithmetic(),\n      rule_forRange(),\n    ),\n  },\n  {\n    // Adding fncall parens\n    name: 'level12',\n    rules: pipe(baseRules(),\n      rule_printParen(),\n      rule_isInputParen(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_arithmetic(),\n      rule_forRangeParen(),\n    ),\n  },\n// ----------------------------------------------------------------\n//  Everything below this line hasn't been done yet\n// ----------------------------------------------------------------\n  {\n    name: 'level11',\n    rules: pipe(baseRules(),\n      rule_printParen(),\n      rule_isInputParen(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_arithmetic(),\n      rule_forRangeParen(),\n    ),\n  },\n  {\n    name: 'level13',\n    rules: pipe(baseRules(),\n      rule_printParen(),\n      rule_isInputParen(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_arithmetic(),\n      rule_forRangeParen(),\n    ),\n  },\n  {\n    name: 'level14',\n    rules: pipe(baseRules(),\n      rule_printParen(),\n      rule_isInputParen(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_arithmetic(),\n      rule_forRangeParen(),\n    ),\n  },\n  {\n    name: 'level15',\n    rules: pipe(baseRules(),\n      rule_printParen(),\n      rule_isInputParen(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_arithmetic(),\n      rule_forRangeParen(),\n    ),\n  },\n  {\n    name: 'level16',\n    rules: pipe(baseRules(),\n      rule_printParen(),\n      rule_isInputParen(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_arithmetic(),\n      rule_forRangeParen(),\n    ),\n  },\n  {\n    name: 'level17',\n    rules: pipe(baseRules(),\n      rule_printParen(),\n      rule_isInputParen(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_arithmetic(),\n      rule_forRangeParen(),\n    ),\n  },\n  {\n    name: 'level18and19',\n    rules: pipe(baseRules(),\n      rule_printParen(),\n      rule_isInputParen(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_arithmetic(),\n      rule_forRangeParen(),\n    ),\n  },\n  {\n    name: 'level20',\n    rules: pipe(baseRules(),\n      rule_printParen(),\n      rule_isInputParen(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_arithmetic(),\n      rule_forRangeParen(),\n    ),\n  },\n  {\n    name: 'level21',\n    rules: pipe(baseRules(),\n      rule_printParen(),\n      rule_isInputParen(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_arithmetic(),\n      rule_forRangeParen(),\n    ),\n  },\n  {\n    name: 'level22',\n    rules: pipe(baseRules(),\n      rule_printParen(),\n      rule_isInputParen(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_arithmetic(),\n      rule_forRangeParen(),\n    ),\n  },\n  {\n    name: 'level23',\n    rules: pipe(baseRules(),\n      rule_printParen(),\n      rule_isInputParen(),\n      rule_is(),\n      rule_ifElse(),\n      rule_expressions(),\n      rule_arithmetic(),\n      rule_forRangeParen(),\n    ),\n  },\n];\n\n\n/**\n * From a list of rules, duplicate all rules\n *\n * - 1 is the rule that's given\n * - 2 is the same rule, adding an '$' which returns to the 'start' state\n *\n * 2nd one comes first to have the right precedence.\n */\nfunction finishLine(rules: Rule[]) {\n  const ret = [];\n  for (const rule of rules) {\n    if (rule.regex) {\n      ret.push({\n        regex: rule.regex + '$',\n        token: rule.token,\n        next: 'start',\n      });\n    }\n    ret.push(rule);\n  }\n  return ret;\n}\n\n/**\n * Add a single rule, or multiple rules, to a given state, or multiple states\n *\n * Examples:\n *\n * - recognize('start', { regex, token, next })\n * - recognize(['start', 'expression'], { regex, token, next })\n * - recognize('start', [{ ... }, {...}])\n */\nfunction recognize(stateOrStates: string | string[], ruleOrRules: Rule | Rule[]) {\n  return (rules: Rules) => {\n    if (!Array.isArray(stateOrStates)) {\n      stateOrStates = [stateOrStates];\n    }\n\n    for (const state of stateOrStates) {\n      if (!rules[state]) {\n        rules[state] = [];\n      }\n      if (Array.isArray(ruleOrRules)) {\n        rules[state].push(...ruleOrRules);\n      } else {\n        rules[state].push(ruleOrRules);\n      }\n    }\n\n    return rules;\n  };\n}\n\n/**\n * comp(f1, f2, f3, ...)\n *\n * Returns f1 \u25CB f2 \u25CB f3 \u25CB ...\n */\nfunction comp(...fns: Array<(x: any) => any>) {\n  return (val: any) => {\n    for (const fn of fns) {\n      val = fn(val);\n    }\n    return val;\n  };\n}\n\n/**\n * pipe(X, f1, f2, f3, ...)\n *\n * Returns ...(f3(f2(f1(X)))\n *\n * (Same as X |> f1 |> f2 |> f3 |> ...)\n */\nfunction pipe(val: any, ...fns: Array<(x: any) => any>) {\n  return comp(...fns)(val);\n}\n\n/**\n * Add a 'print' rule, going to the indicated 'next' state (start if omitted)\n */\nfunction rule_printSpace(next?: string) {\n  return recognize('start', {\n    regex: keywordWithSpace('print'),\n    token: 'keyword',\n    next: next ?? 'start',\n  });\n}\n\n/**\n * Add an 'is ask' rule, going to the indicated 'next' state (expression_eol if omitted)\n */\nfunction rule_isAsk(next?: string) {\n  return recognize('start', {\n    regex: '(\\\\w+)( is ask )',\n    token: ['text', 'keyword'],\n    next: next ?? 'expression_eol',\n  });\n}\n\n/**\n * Add an 'is' rule, going to the indicated 'next' state (expression_eol if omitted)\n */\nfunction rule_is(next?: string) {\n  return recognize('start', {\n    regex: '(\\\\w+)( is )',\n    token: ['text', 'keyword'],\n    next: next ?? 'expression_eol',\n  });\n}\n\n/**\n * Add a 'print' rule with brackets\n */\nfunction rule_printParen() {\n  return recognize('start', {\n    regex: '(print)(\\\\()',\n    token: ['keyword', 'paren.lparen'],\n    next: 'start'\n  });\n}\n\nfunction rule_turtle() {\n    return comp(\n      recognize('start', {\n        regex: 'turn (left|right)?',\n        token: 'keyword',\n        next: 'start',\n      }),\n      recognize('start', {\n        regex: 'forward',\n        token: 'keyword',\n        next: 'start',\n      })\n    )\n}\n\n\n\n\n\n/**\n * Add an 'is input' rule with brackets\n */\nfunction rule_isInputParen() {\n  return recognize('start', {\n    regex: '(\\\\w+)( is input)(\\\\()',\n    token: ['text', 'keyword', 'paren.lparen'],\n    next: 'start'\n  });\n}\n\n/**\n * Recognize expressions as part of the 'start' state\n */\nfunction rule_expressions() {\n  return comp(\n    recognize('start', {\n      regex: \"'[^']*'\",\n      token: 'constant.character',\n    }),\n    recognize('start', {\n      regex: 'at random',\n      token: 'keyword'\n    }),\n    recognize('start', {\n      regex: '[, ]+',\n      token: 'punctuation.operator',\n    }),\n  );\n}\n\n\n/**\n * Add highlighting for if/else, also add a condition\n */\nfunction rule_ifElseOneLine() {\n  return comp(\n    recognize('start', {\n      regex: keywordWithSpace('if'),\n      token: 'keyword',\n      next: 'condition',\n    }),\n    recognize('start', {\n      regex: keywordWithSpace('else'),\n      token: 'keyword',\n    }),\n    recognize('condition', {\n      regex: keywordWithSpace('is'),\n      token: 'keyword',\n      next: 'start',\n    }),\n  );\n}\n\nfunction rule_ifElse() {\n  return comp(\n    recognize('start', {\n      regex: keywordWithSpace('if'),\n      token: 'keyword',\n      next: 'condition',\n    }),\n    recognize('start', {\n      regex: '\\\\b' + 'else' + '\\\\b',\n      token: 'keyword',\n    }),\n    recognize('condition', {\n      regex: keywordWithSpace('((is)|(in))'),\n      token: 'keyword',\n      next: 'start',\n    }),\n  );\n}\n\n/**\n * Add numbers and arithmetic\n */\nfunction rule_arithmetic() {\n  return recognize(['start', 'expression_eol'], [\n    {\n      regex: ' \\\\* ',\n      token: 'keyword',\n    },\n    {\n      regex: ' \\\\+ ',\n      token: 'keyword',\n    },\n    {\n      regex: ' \\\\- ',\n      token: 'keyword',\n    },\n  ]);\n}\n\n/**\n * Add highlighting for repeat\n */\nfunction rule_repeat() {\n  return recognize('start', {\n    regex: '(repeat)( \\\\w+ )(times)',\n    token: ['keyword', 'text', 'keyword'],\n  });\n}\n\nfunction rule_for(){\n  return recognize('start', {\n    regex: '(for )(\\\\w+)( in )(\\\\w+)',\n    token: ['keyword', 'text', 'keyword', 'text'],\n  });\n}\n\nfunction rule_forRange() {\n  return recognize('start', {\n    regex: '(for )(\\\\w+)( in range )(\\\\w+)( to )(\\\\w+)',\n    token: ['keyword', 'text', 'keyword', 'text', 'keyword', 'text'],\n  });\n}\n\nfunction rule_forRangeParen() {\n  return recognize('start', {\n    regex: '(for )(\\\\w+)( in range)(\\\\()([\\\\s\\\\w]+)(,)([\\\\s\\\\w]+)(\\\\))',\n    token: ['keyword', 'text', 'keyword', 'paren.lparen', 'text', 'punctuation.operator', 'text', 'paren.rparen'],\n  });\n}\n\n/**\n * Modify the given ruleset, replacing literal spaces with \"one or more spaces\"\n */\nfunction loosenRules(rules: Rules) {\n  for (const ruleSets of Object.values(rules)) {\n    for (const rule of ruleSets) {\n      if (rule.regex && !(rule as any)._loosened) {\n        (rule as any).regex = rule.regex.replace(/ /g, ' +');\n        (rule as any)._loosened = true;\n      }\n    }\n  }\n  return rules;\n}\n\n\n\n// Only do this work if the 'define' function is actually available at runtime.\n// If not, this script got included on a page that didn't include the Ace\n// editor. No point in continuing if that is the case.\nif ((window as any).define) {\n\n  // Define the modes based on the level definitions above\n  for (const level of LEVELS) {\n\n    // This is a local definition of the file 'ace/mode/level1.js', etc.\n    define('ace/mode/' + level.name, [], function(require, exports, _module) {\n      var oop = require('ace/lib/oop');\n      var TextMode = require('ace/mode/text').Mode;\n      var TextHighlightRules = require('ace/mode/text_highlight_rules').TextHighlightRules;\n\n      function ThisLevelHighlightRules(this: any) {\n        this.$rules = loosenRules(level.rules);\n        this.normalizeRules();\n      };\n      oop.inherits(ThisLevelHighlightRules, TextHighlightRules);\n\n      function Mode(this: any) {\n        this.HighlightRules = ThisLevelHighlightRules;\n      };\n      oop.inherits(Mode, TextMode);\n\n      exports.Mode = Mode;\n    });\n  }\n}\n\n/**\n * Wrap a keyword in word-boundary markers for use in the tokenizer regexes\n *\n * Use this to only recognize a word if it's a complete word by itself (and\n * not accidentally a part of a larger word).\n *\n * The keyword must be followed by space.\n */\nfunction keywordWithSpace(keyword: string) {\n  return '\\\\b' + keyword + ' ';\n}\n", "import { modal, error } from './modal';\nimport { auth } from './auth';\n\nexport function create_class() {\n  modal.prompt (auth.texts['class_name_prompt'], '', function (class_name) {\n\n    $.ajax({\n      type: 'POST',\n      url: '/class',\n      data: JSON.stringify({\n        name: class_name\n      }),\n      contentType: 'application/json',\n      dataType: 'json'\n    }).done(function(_response) {\n      location.reload ();\n    }).fail(function(err) {\n      console.error(err);\n      error.show(ErrorMessages['Connection_error'], JSON.stringify(err));\n    });\n  });\n}\n\nexport function rename_class(id: string) {\n  modal.prompt (auth.texts['class_name_prompt'], '', function (class_name) {\n\n    $.ajax({\n      type: 'PUT',\n      url: '/class/' + id,\n      data: JSON.stringify({\n        name: class_name\n      }),\n      contentType: 'application/json',\n      dataType: 'json'\n    }).done(function(_response) {\n      location.reload ();\n    }).fail(function(err) {\n      console.error(err);\n      error.show(ErrorMessages['Connection_error'], JSON.stringify(err));\n    });\n  });\n}\n\nexport function delete_class(id: string) {\n  modal.confirm (auth.texts['delete_class_prompt'], function () {\n\n    $.ajax({\n      type: 'DELETE',\n      url: '/class/' + id,\n      contentType: 'application/json',\n      dataType: 'json'\n    }).done(function(_response) {\n      window.location.pathname = '/for-teachers';\n    }).fail(function(err) {\n      console.error(err);\n      error.show(ErrorMessages['Connection_error'], JSON.stringify(err));\n    });\n  });\n}\n\nexport function join_class(link: string, name: string, noRedirect=false) {\n  // If there's no session but we want to join the class, we store the program data in localStorage and redirect to /login.\n  if (! auth.profile) {\n    return modal.confirm (auth.texts['join_prompt'], function () {\n      localStorage.setItem ('hedy-join', JSON.stringify ({link: link, name: name}));\n      window.location.pathname = '/login';\n      return;\n    });\n  }\n\n  $.ajax({\n    type: 'GET',\n    url: link,\n  }).done(function(_response) {\n    modal.alert (auth.texts['class_join_confirmation'] + ' ' + name);\n    if (! noRedirect) window.location.pathname = '/programs';\n  }).fail(function(err) {\n    console.error(err);\n    error.show(ErrorMessages['Connection_error'], JSON.stringify(err));\n  });\n}\n\nexport function remove_student(class_id: string, student_id: string) {\n  modal.confirm (auth.texts['remove_student_prompt'], function () {\n\n    $.ajax({\n      type: 'DELETE',\n      url: '/class/' + class_id + '/student/' + student_id,\n      contentType: 'application/json',\n      dataType: 'json'\n    }).done(function(_response) {\n      location.reload ();\n    }).fail(function(err) {\n      console.error(err);\n      error.show(ErrorMessages['Connection_error'], JSON.stringify(err));\n    });\n  });\n}\n\n", "import { modal } from './modal';\nimport { join_class } from './teachers';\nimport { saveitP } from './app';\n\nconst countries: Record<string, string> = {'AF':'Afghanistan','AX':'\u00C5land Islands','AL':'Albania','DZ':'Algeria','AS':'American Samoa','AD':'Andorra','AO':'Angola','AI':'Anguilla','AQ':'Antarctica','AG':'Antigua and Barbuda','AR':'Argentina','AM':'Armenia','AW':'Aruba','AU':'Australia','AT':'Austria','AZ':'Azerbaijan','BS':'Bahamas','BH':'Bahrain','BD':'Bangladesh','BB':'Barbados','BY':'Belarus','BE':'Belgium','BZ':'Belize','BJ':'Benin','BM':'Bermuda','BT':'Bhutan','BO':'Bolivia, Plurinational State of','BQ':'Bonaire, Sint Eustatius and Saba','BA':'Bosnia and Herzegovina','BW':'Botswana','BV':'Bouvet Island','BR':'Brazil','IO':'British Indian Ocean Territory','BN':'Brunei Darussalam','BG':'Bulgaria','BF':'Burkina Faso','BI':'Burundi','KH':'Cambodia','CM':'Cameroon','CA':'Canada','CV':'Cape Verde','KY':'Cayman Islands','CF':'Central African Republic','TD':'Chad','CL':'Chile','CN':'China','CX':'Christmas Island','CC':'Cocos (Keeling) Islands','CO':'Colombia','KM':'Comoros','CG':'Congo','CD':'Congo, the Democratic Republic of the','CK':'Cook Islands','CR':'Costa Rica','CI':'C\u00F4te d\\'Ivoire','HR':'Croatia','CU':'Cuba','CW':'Cura\u00E7ao','CY':'Cyprus','CZ':'Czech Republic','DK':'Denmark','DJ':'Djibouti','DM':'Dominica','DO':'Dominican Republic','EC':'Ecuador','EG':'Egypt','SV':'El Salvador','GQ':'Equatorial Guinea','ER':'Eritrea','EE':'Estonia','ET':'Ethiopia','FK':'Falkland Islands (Malvinas)','FO':'Faroe Islands','FJ':'Fiji','FI':'Finland','FR':'France','GF':'French Guiana','PF':'French Polynesia','TF':'French Southern Territories','GA':'Gabon','GM':'Gambia','GE':'Georgia','DE':'Germany','GH':'Ghana','GI':'Gibraltar','GR':'Greece','GL':'Greenland','GD':'Grenada','GP':'Guadeloupe','GU':'Guam','GT':'Guatemala','GG':'Guernsey','GN':'Guinea','GW':'Guinea-Bissau','GY':'Guyana','HT':'Haiti','HM':'Heard Island and McDonald Islands','VA':'Holy See (Vatican City State)','HN':'Honduras','HK':'Hong Kong','HU':'Hungary','IS':'Iceland','IN':'India','ID':'Indonesia','IR':'Iran, Islamic Republic of','IQ':'Iraq','IE':'Ireland','IM':'Isle of Man','IL':'Israel','IT':'Italy','JM':'Jamaica','JP':'Japan','JE':'Jersey','JO':'Jordan','KZ':'Kazakhstan','KE':'Kenya','KI':'Kiribati','KP':'Korea, Democratic People\\'s Republic of','KR':'Korea, Republic of','KW':'Kuwait','KG':'Kyrgyzstan','LA':'Lao People\\'s Democratic Republic','LV':'Latvia','LB':'Lebanon','LS':'Lesotho','LR':'Liberia','LY':'Libya','LI':'Liechtenstein','LT':'Lithuania','LU':'Luxembourg','MO':'Macao','MK':'Macedonia, the Former Yugoslav Republic of','MG':'Madagascar','MW':'Malawi','MY':'Malaysia','MV':'Maldives','ML':'Mali','MT':'Malta','MH':'Marshall Islands','MQ':'Martinique','MR':'Mauritania','MU':'Mauritius','YT':'Mayotte','MX':'Mexico','FM':'Micronesia, Federated States of','MD':'Moldova, Republic of','MC':'Monaco','MN':'Mongolia','ME':'Montenegro','MS':'Montserrat','MA':'Morocco','MZ':'Mozambique','MM':'Myanmar','NA':'Namibia','NR':'Nauru','NP':'Nepal','NL':'Netherlands','NC':'New Caledonia','NZ':'New Zealand','NI':'Nicaragua','NE':'Niger','NG':'Nigeria','NU':'Niue','NF':'Norfolk Island','MP':'Northern Mariana Islands','NO':'Norway','OM':'Oman','PK':'Pakistan','PW':'Palau','PS':'Palestine, State of','PA':'Panama','PG':'Papua New Guinea','PY':'Paraguay','PE':'Peru','PH':'Philippines','PN':'Pitcairn','PL':'Poland','PT':'Portugal','PR':'Puerto Rico','QA':'Qatar','RE':'R\u00E9union','RO':'Romania','RU':'Russian Federation','RW':'Rwanda','BL':'Saint Barth\u00E9lemy','SH':'Saint Helena, Ascension and Tristan da Cunha','KN':'Saint Kitts and Nevis','LC':'Saint Lucia','MF':'Saint Martin (French part)','PM':'Saint Pierre and Miquelon','VC':'Saint Vincent and the Grenadines','WS':'Samoa','SM':'San Marino','ST':'Sao Tome and Principe','SA':'Saudi Arabia','SN':'Senegal','RS':'Serbia','SC':'Seychelles','SL':'Sierra Leone','SG':'Singapore','SX':'Sint Maarten (Dutch part)','SK':'Slovakia','SI':'Slovenia','SB':'Solomon Islands','SO':'Somalia','ZA':'South Africa','GS':'South Georgia and the South Sandwich Islands','SS':'South Sudan','ES':'Spain','LK':'Sri Lanka','SD':'Sudan','SR':'Suriname','SJ':'Svalbard and Jan Mayen','SZ':'Swaziland','SE':'Sweden','CH':'Switzerland','SY':'Syrian Arab Republic','TW':'Taiwan, Province of China','TJ':'Tajikistan','TZ':'Tanzania, United Republic of','TH':'Thailand','TL':'Timor-Leste','TG':'Togo','TK':'Tokelau','TO':'Tonga','TT':'Trinidad and Tobago','TN':'Tunisia','TR':'Turkey','TM':'Turkmenistan','TC':'Turks and Caicos Islands','TV':'Tuvalu','UG':'Uganda','UA':'Ukraine','AE':'United Arab Emirates','GB':'United Kingdom','US':'United States','UM':'United States Minor Outlying Islands','UY':'Uruguay','UZ':'Uzbekistan','VU':'Vanuatu','VE':'Venezuela, Bolivarian Republic of','VN':'Viet Nam','VG':'Virgin Islands, British','VI':'Virgin Islands, U.S.','WF':'Wallis and Futuna','EH':'Western Sahara','YE':'Yemen','ZM':'Zambia','ZW':'Zimbabwe'};\n\nexport interface Profile {\n  session_expires_at: number;\n}\n\ninterface User {\n  username?: string;\n  email?: string;\n  password?: string;\n  birth_year?: number;\n  country?: string;\n  gender?: string;\n  subscribe?: string;\n  prog_experience?: 'yes' | 'no';\n  experience_languages?: string[];\n}\n\ninterface UserForm {\n  username?: string;\n  email?: string;\n  password?: string;\n  birth_year?: string;\n  country?: string;\n  gender?: string;\n  subscribe?: string;\n  mail_repeat?: string;\n  password_repeat?: string;\n  old_password?: string;\n}\n\nexport const auth = {\n  texts: AuthMessages,\n  profile: undefined as (Profile | undefined),\n  reset: undefined as (Record<string, string> | undefined),\n  entityify: function (string: string) {\n      return string.replace (/&/g, '&amp;').replace (/</g, '&lt;').replace (/>/g, '&gt;').replace (/\"/g, '&quot;').replace (/'/g, '&#39;').replace (/`/g, '&#96;');\n   },\n  emailRegex: /^(([a-zA-Z0-9_+\\.\\-]+)@([\\da-zA-Z\\.\\-]+)\\.([a-zA-Z\\.]{2,6})\\s*)$/,\n  redirect: function (where: string) {\n    where = '/' + where;\n    window.location.pathname = where;\n  },\n  logout: function () {\n    $.ajax ({type: 'POST', url: '/auth/logout'}).done (function () {\n      auth.redirect ('login');\n    });\n  },\n  destroy: function () {\n    modal.confirm (auth.texts['are_you_sure'], function () {\n      $.ajax ({type: 'POST', url: '/auth/destroy'}).done (function () {\n        auth.redirect ('');\n      });\n    });\n  },\n  error: function (message: string, element?: string | null, id?: string) {\n    $ (id || '#error').html (message);\n    $ (id || '#error').css ('display', 'block');\n    if (element) $ ('#' + element).css ('border', 'solid 1px red');\n  },\n  clear_error: function (id?: string) {\n    $ (id || '#error').html ('');\n    $ (id || '#error').css ('display', 'none');\n    $ ('form *').css ('border', '');\n  },\n  success: function (message: string, id?: string) {\n    $ ('#error').css ('display', 'none');\n    $ (id || '#success').html (message);\n    $ (id || '#success').css ('display', 'block');\n  },\n  submit: function (op: string) {\n    const values: UserForm = {};\n    $ ('form.auth *').map (function (_k, el) {\n      if (el.id) values[el.id as keyof UserForm] = (el as HTMLInputElement).value;\n    });\n\n    if (op === 'signup') {\n      if (! values.username) return auth.error (auth.texts['please_username'], 'username');\n      values.username = values.username.trim ();\n      if (values.username.length < 3) return auth.error (auth.texts['username_three'], 'username');\n      if (values.username.match (/:|@/)) return auth.error (auth.texts['username_special'], 'username');\n\n      if (! values.email?.match (auth.emailRegex)) return auth.error (auth.texts['valid_email'], 'email');\n      if (values.email !== values.mail_repeat) return auth.error (auth.texts['repeat_match_email'],    'mail_repeat');\n\n      if (! values.password) return auth.error (auth.texts['please_password'], 'password');\n      if (values.password.length < 6) return auth.error (auth.texts['password_six'], 'password');\n      if (values.password !== values.password_repeat) return auth.error (auth.texts['repeat_match_password'], 'password_repeat');\n\n      if (values.birth_year) {\n        if (!validBirthYearString(values.birth_year)) {\n           return auth.error (auth.texts['valid_year'] + new Date ().getFullYear (), 'birth_year');\n        }\n      }\n\n      const payload: User = {\n        username: values.username,\n        email: values.email,\n        password: values.password,\n        birth_year: values.birth_year ? parseInt(values.birth_year) : undefined,\n        country: values.country ? values.country : undefined,\n        gender: values.gender ? values.gender : undefined,\n        subscribe: $('#subscribe').prop('checked'),\n        prog_experience: $('input[name=has_experience]:checked').val() as 'yes'|'no',\n        experience_languages: $('#languages').is(':visible')\n          ? $('input[name=languages]').filter(':checked').map(() => $(this).val() as string).get()\n          : undefined,\n      };\n\n      $.ajax ({type: 'POST', url: '/auth/signup', data: JSON.stringify (payload), contentType: 'application/json; charset=utf-8'}).done (function () {\n        auth.success (auth.texts['signup_success']);\n\n        // We set up a non-falsy profile to let `saveit` know that we're logged in. We put session_expires_at since we need it.\n        auth.profile = {session_expires_at: Date.now () + 1000 * 60 * 60 * 24};\n\n        afterLogin();\n      }).fail (function (response) {\n        const error = response.responseText || '';\n        if (error.match ('email'))         auth.error (auth.texts['exists_email']);\n        else if (error.match ('username')) auth.error (auth.texts['exists_username']);\n        else                               auth.error (auth.texts['ajax_error']);\n      });\n    }\n\n    if (op === 'login') {\n      if (! values.username) return auth.error (auth.texts['please_username_email'], 'username');\n      if (! values.password) return auth.error (auth.texts['please_password'], 'password');\n\n      auth.clear_error ();\n      $.ajax ({type: 'POST', url: '/auth/login', data: JSON.stringify ({username: values.username, password: values.password}), contentType: 'application/json; charset=utf-8'}).done (function () {\n\n        // We set up a non-falsy profile to let `saveit` know that we're logged in. We put session_expires_at since we need it.\n        auth.profile = {session_expires_at: Date.now () + 1000 * 60 * 60 * 24};\n\n        afterLogin();\n      }).fail (function (response) {\n        if (response.status === 403) {\n           auth.error (auth.texts['invalid_username_password'] + ' ' + auth.texts['no_account'] + ' &nbsp;<button class=\"green-btn\" onclick=\"auth.redirect (\\'signup\\')\">' + auth.texts['create_account'] + '</button>');\n           $ ('#create-account').hide ();\n           localStorage.setItem ('hedy-login-username', values.username ?? '');\n        }\n        else auth.error (auth.texts['ajax_error']);\n      });\n    }\n\n    if (op === 'profile') {\n      if (! (values.email ?? '').match (auth.emailRegex)) return auth.error (auth.texts['valid_email'], 'email');\n\n      if (values.birth_year) {\n        if (!validBirthYearString(values.birth_year)) {\n          return auth.error (auth.texts['valid_year'] + new Date ().getFullYear (), 'birth_year');\n        }\n      }\n\n      const payload: User = {\n        email: values['email'],\n        birth_year: values.birth_year ? parseInt(values['birth_year']) : undefined,\n        country: values['country'],\n        gender: values['gender'],\n        prog_experience: $ ('input[name=has_experience]:checked').val() as 'yes' | 'no',\n        experience_languages: $('#languages').is(':visible')\n          ? $('input[name=languages]').filter(':checked').map(() => $(this).val() as string).get()\n          : undefined,\n      };\n\n      console.log(payload);\n\n      auth.clear_error ();\n      $.ajax ({type: 'POST', url: '/profile', data: JSON.stringify (payload), contentType: 'application/json; charset=utf-8'}).done (function () {\n        auth.success (auth.texts['profile_updated']);\n      }).fail (function (response) {\n        auth.error (auth.texts['ajax_error'] + ' ' + response.responseText);\n      });\n    }\n\n    if (op === 'change_password') {\n      if (! values.password) return auth.error (auth.texts['please_password'], 'password', '#error-password');\n      if (values.password.length < 6) return auth.error (auth.texts['password_six'], 'password', '#error-password');\n      if (values.password !== values.password_repeat) return auth.error (auth.texts['repeat_match'], 'password_repeat', '#error-password');\n\n      const payload = {old_password: values.old_password, new_password: values.password};\n\n      auth.clear_error ('#error-password');\n      $.ajax ({type: 'POST', url: '/auth/change_password', data: JSON.stringify (payload), contentType: 'application/json; charset=utf-8'}).done (function () {\n        auth.success (auth.texts['password_updated'], '#success-password');\n        $ ('#old_password').val ('');\n        $ ('#password').val ('');\n        $ ('#password_repeat').val ('');\n      }).fail (function (response) {\n        if (response.status === 403) auth.error (auth.texts['invalid_password'], null, '#error-password');\n        else                         auth.error (auth.texts['ajax_error'], null, '#error-password');\n      });\n    }\n\n    if (op === 'recover') {\n      if (! values.username) return auth.error (auth.texts['please_username'], 'username');\n\n      const payload = {username: values.username};\n\n      auth.clear_error ();\n      $.ajax ({type: 'POST', url: '/auth/recover', data: JSON.stringify (payload), contentType: 'application/json; charset=utf-8'}).done (function () {\n        auth.success (auth.texts['sent_password_recovery']);\n        $ ('#username').val ('');\n      }).fail (function (response) {\n        if (response.status === 403) auth.error (auth.texts['invalid_username']);\n        else                         auth.error (auth.texts['ajax_error']);\n      });\n    }\n\n    if (op === 'reset') {\n      if (! values.password) return auth.error (auth.texts['please_password'], 'password');\n      if (values.password.length < 6) return auth.error(auth.texts['password_six'], 'password');\n      if (values.password !== values.password_repeat) return auth.error (auth.texts['repeat_match'], 'password_repeat');\n\n      const payload = {username: auth.reset?.['username'], token: auth.reset?.['token'], password: values.password};\n\n      auth.clear_error ();\n      $.ajax ({type: 'POST', url: '/auth/reset', data: JSON.stringify (payload), contentType: 'application/json; charset=utf-8'}).done (function () {\n        auth.success (auth.texts['password_resetted']);\n        $ ('#password').val ('');\n        $ ('#password_repeat').val ('');\n        delete auth.reset;\n        auth.redirect ('login');\n      }).fail (function (response) {\n        if (response.status === 403) auth.error (auth.texts['invalid_reset_link']);\n        else                         auth.error (auth.texts['ajax_error']);\n      });\n    }\n  },\n  markAsTeacher: function (username: string, is_teacher: boolean) {\n    $.ajax ({type: 'POST', url: '/admin/markAsTeacher', data: JSON.stringify ({username: username, is_teacher: is_teacher}), contentType: 'application/json; charset=utf-8'}).done (function () {\n      modal.alert (['User', username, 'successfully', is_teacher ? 'marked' : 'unmarked', 'as teacher'].join (' '), 4000);\n      location.reload ();\n    }).fail (function (error) {\n      console.log (error);\n      modal.alert (['Error when', is_teacher ? 'marking' : 'unmarking', 'user', username, 'as teacher'].join (' '));\n    });\n  },\n\n  changeUserEmail: function (username: string, email: string) {\n    modal.prompt ('Please enter the corrected email', email, function (correctedEmail) {\n      if (correctedEmail === email) return;\n      if (! correctedEmail.match (auth.emailRegex)) return modal.alert ('Please enter a valid email.');\n      $.ajax ({type: 'POST', url: '/admin/changeUserEmail', data: JSON.stringify ({username: username, email: correctedEmail}), contentType: 'application/json; charset=utf-8'}).done (function () {\n        modal.alert (['Successfully changed the email for User', username, 'to', correctedEmail].join (' '));\n        location.reload ();\n      }).fail (function (error) {\n        console.log (error);\n        modal.alert (['Error when changing the email for User', username].join (' '));\n      });\n    });\n  },\n}\n\n// *** LOADERS ***\n\nif ($ ('#country')) {\n  let html = $('#country').html();\n  Object.keys (countries).map (function (code) {\n    html += '<option value=\"' + code + '\">' + countries [code] + '</option>';\n  });\n  $ ('#country').html (html);\n}\n\n$ ('.auth input').get ().map (function (el) {\n  // Clear red borders if input was marked from a previous error.\n  el.addEventListener ('input', () => auth.clear_error());\n});\n\n// We use GET /profile to see if we're logged in since we use HTTP only cookies and cannot check from javascript.\n$.ajax ({type: 'GET', url: '/profile'}).done (function (response) {\n  if (['/signup', '/login'].indexOf (window.location.pathname) !== -1) auth.redirect ('my-profile');\n\n  auth.profile = response;\n  if ($ ('#profile').html ()) {\n    $ ('#username').html (response.username);\n    $ ('#email').val (response.email);\n    $ ('#birth_year').val (response.birth_year);\n    $ ('#gender').val (response.gender);\n    $ ('#country').val (response.country);\n    if (response.prog_experience) {\n      $ ('input[name=has_experience][value=\"' + response.prog_experience + '\"]').prop ('checked', true);\n      if (response.prog_experience === 'yes') $ ('#languages').show ();\n    }\n    (response.experience_languages || []).map (function (lang: string) {\n       $ ('input[name=languages][value=\"' + lang + '\"]').prop ('checked', true);\n    });\n    $ ('#student_classes ul').html ((response.student_classes || []).map (function (Class: Class) {\n       return '<li>' + auth.entityify (Class.name) + '</li>';\n    }).join (''));\n  }\n}).fail (function (_response) {\n  if (window.location.pathname.indexOf ('/my-profile') !== -1) auth.redirect ('login');\n});\n\nif (window.location.pathname === '/reset') {\n  const query = window.location.search.slice (1).split ('&');\n  const params: Record<string, string> = {};\n  query.map (function (item) {\n    const split = item.split ('=');\n    params [split [0]] = decodeURIComponent (split [1]);\n  });\n  // If we don't receive username and token, the redirect link is invalid. We redirect the user to /recover.\n  if (! params['username'] || ! params['token']) auth.redirect ('recover')\n  else auth.reset = params;\n}\n\nif (window.location.pathname === '/signup') {\n  const login_username = localStorage.getItem ('hedy-login-username');\n  if (login_username) {\n    localStorage.removeItem ('hedy-login-username');\n    if (login_username.match ('@')) $ ('#email').val (login_username);\n    else                            $ ('#username').val (login_username);\n  }\n}\n\n$ ('#email, #mail_repeat').on ('cut copy paste', function (e) {\n   e.preventDefault ();\n   return false;\n});\n\ninterface Class {\n  name: string;\n}\n\n/**\n * After login:\n *\n * - Check if there's a saved program in localstorage. If so, save it.\n * - Check if we were supposed to be joining a class. If so, join it.\n * - Otherwise redirect to \"my programs\".\n */\nasync function afterLogin() {\n  const savedProgramString = localStorage.getItem('hedy-first-save');\n  const savedProgram = savedProgramString ? JSON.parse(savedProgramString) : undefined;\n\n  if (savedProgram) {\n    await saveitP(savedProgram[0], savedProgram[1], savedProgram[2], savedProgram[3]);\n    localStorage.removeItem('hedy-first-save');\n\n    const redirect = getSavedRedirectPath();\n    if (redirect) {\n      return auth.redirect(redirect);\n    }\n  }\n\n  const joinClassString = localStorage.getItem('hedy-join');\n  const joinClass = joinClassString ? JSON.parse(joinClassString) : undefined;\n  if (joinClass) {\n    localStorage.removeItem('hedy-join');\n    return join_class(joinClass.link, joinClass.name);\n  }\n\n  const redirect = getSavedRedirectPath();\n  if (redirect) {\n    return auth.redirect(redirect);\n  }\n\n  auth.redirect('programs');\n}\n\nfunction getSavedRedirectPath() {\n  const redirect = localStorage.getItem('hedy-save-redirect');\n  if (redirect) {\n    localStorage.removeItem('hedy-save-redirect');\n  }\n  return redirect;\n}\n\nfunction validBirthYearString(year: string) {\n  const birth_year = parseInt (year);\n  if (! birth_year || birth_year < 1900 || birth_year > new Date ().getFullYear ()) return false;\n  return true;\n}\n", "// It's important that this file gets loaded first\nimport './syntaxModesRules';\n\nimport { modal, error } from './modal';\nimport { auth } from './auth';\n\nexport let theGlobalEditor: AceAjax.Editor;\n\n(function() {\n  // A bunch of code expects a global \"State\" object. Set it here if not\n  // set yet.\n  if (!window.State) {\n    window.State = {};\n  }\n\n  // *** EDITOR SETUP ***\n  initializeMainEditor($('#editor'));\n\n  // Any code blocks we find inside 'turn-pre-into-ace' get turned into\n  // read-only editors (for syntax highlighting)\n  for (const preview of $('.turn-pre-into-ace pre').get()) {\n    $(preview).addClass('text-lg rounded');\n    const exampleEditor = turnIntoAceEditor(preview, true)\n    // Fits to content size\n    exampleEditor.setOptions({ maxLines: Infinity });\n    exampleEditor.setOptions({ minLines: 2 });\n    // Strip trailing newline, it renders better\n    exampleEditor.setValue(exampleEditor.getValue().replace(/\\n+$/, ''), -1);\n    // And add an overlay button to the editor, if the no-copy-button attribute isn't there\n    if (! $(preview).hasClass('no-copy-button')) {\n      const buttonContainer = $('<div>').css({ position: 'absolute', top: 5, right: 5, width: 'auto' }).appendTo(preview);\n      $('<button>').attr('title', UiMessages['try_button']).css({ fontFamily: 'sans-serif' }).addClass('green-btn').text('\u21E5').appendTo(buttonContainer).click(function() {\n        theGlobalEditor?.setValue(exampleEditor.getValue() + '\\n');\n      });\n    }\n  }\n\n  /**\n   * Initialize the main editor and attach all the required event handlers\n   */\n  function initializeMainEditor($editor: JQuery) {\n    if (!$editor.length) return;\n\n    // We expose the editor globally so it's available to other functions for resizing\n    var editor = turnIntoAceEditor($editor.get(0)!, $editor.data('readonly'));\n    theGlobalEditor = editor;\n    error.setEditor(editor);\n\n    window.Range = ace.require('ace/range').Range // get reference to ace/range\n\n    // Load existing code from session, if it exists\n    const storage = window.sessionStorage;\n    if (storage) {\n      const levelKey = $editor.data('lskey');\n      const loadedProgram = $editor.data('loaded-program');\n\n      // On page load, if we have a saved program and we are not loading a program by id, we load the saved program\n      const programFromStorage = storage.getItem(levelKey);\n      if (loadedProgram !== 'True' && programFromStorage) {\n        editor.setValue(programFromStorage, 1);\n      }\n\n      // When the user exits the editor, save what we have.\n      editor.on('blur', function(_e: Event) {\n        storage.setItem(levelKey, editor.getValue());\n      });\n\n      // If prompt is shown and user enters text in the editor, hide the prompt.\n      editor.on('change', function () {\n        if ($('#inline-modal').is (':visible')) $('#inline-modal').hide();\n        window.State.disable_run = false;\n        $ ('#runit').css('background-color', '');\n        window.State.unsaved_changes = true;\n\n        clearErrors(editor);\n      });\n    }\n\n    // *** PROMPT TO SAVE CHANGES ***\n\n    window.onbeforeunload = () => {\n      // The browser doesn't show this message, rather it shows a default message.\n      if (window.State.unsaved_changes && !window.State.no_unload_prompt) {\n        return auth.texts['unsaved_changes'];\n      } else {\n        return undefined;\n      }\n    };\n\n    // *** KEYBOARD SHORTCUTS ***\n\n    let altPressed: boolean | undefined;\n\n    // alt is 18, enter is 13\n    window.addEventListener ('keydown', function (ev) {\n      const keyCode = ev.keyCode;\n      if (keyCode === 18) {\n        altPressed = true;\n        return;\n      }\n      if (keyCode === 13 && altPressed) {\n        if (!window.State.level || !window.State.lang) {\n          throw new Error('Oh no');\n        }\n        runit (window.State.level, window.State.lang, function () {\n          $ ('#output').focus ();\n        });\n      }\n      // We don't use jquery because it doesn't return true for this equality check.\n      if (keyCode === 37 && document.activeElement === document.getElementById ('output')) {\n        editor.focus ();\n        editor.navigateFileEnd ();\n      }\n    });\n    window.addEventListener ('keyup', function (ev) {\n      const keyCode = ev.keyCode;\n      if (keyCode === 18) {\n        altPressed = false;\n        return;\n      }\n    });\n    return editor;\n  }\n\n  /**\n   * Turn an HTML element into an Ace editor\n   */\n  function turnIntoAceEditor(element: HTMLElement, isReadOnly: boolean): AceAjax.Editor {\n    const editor = ace.edit(element);\n    editor.setTheme(\"ace/theme/monokai\");\n    editor.setOptions({\n        fixedWidthGutter: true\n      });\n    if (isReadOnly) {\n      editor.setOptions({\n        readOnly: true,\n        showGutter: false,\n        showPrintMargin: false,\n        highlightActiveLine: false\n      });\n    }\n    console.log(editor.getOptions());\n\n    // a variable which turns on(1) highlighter or turns it off(0)\n    var highlighter = 1;\n\n    if (highlighter == 1) {\n      // Everything turns into 'ace/mode/levelX', except what's in\n      // this table. Yes the numbers are strings. That's just JavaScript for you.\n      const modeExceptions: Record<string, string> = {\n        '9': 'ace/mode/level9and10',\n        '10': 'ace/mode/level9and10',\n        '18': 'ace/mode/level18and19',\n        '19': 'ace/mode/level18and19',\n      };\n\n      if (window.State.level) {\n        const mode = modeExceptions[window.State.level] || `ace/mode/level${window.State.level}`;\n        editor.session.setMode(mode);\n      }\n    }\n\n    return editor;\n  }\n})();\n\nfunction reloadOnExpiredSession () {\n   // If user is not logged in or session is not expired, return false.\n   if (! auth.profile || auth.profile.session_expires_at > Date.now ()) return false;\n   // Otherwise, reload the page to update the top bar.\n   location.reload ();\n   return true;\n}\n\nfunction clearErrors(editor: AceAjax.Editor) {\n  editor.session.clearAnnotations();\n  for (const marker in editor.session.getMarkers(false)) {\n    editor.session.removeMarker(marker as any);\n  }\n}\n\nexport function runit(level: string, lang: string, cb: () => void) {\n  if (window.State.disable_run) return modal.alert (auth.texts['answer_question']);\n\n  if (reloadOnExpiredSession ()) return;\n\n  error.hide();\n  try {\n    level = level.toString();\n    var editor = theGlobalEditor;\n    var code = get_trimmed_code();\n\n    clearErrors(editor);\n\n    console.log('Original program:\\n', code);\n    $.ajax({\n      type: 'POST',\n      url: '/parse',\n      data: JSON.stringify({\n        level: level,\n        code: code,\n        lang: lang,\n        read_aloud : !!$('#speak_dropdown').val(),\n        adventure_name: window.State.adventure_name\n      }),\n      contentType: 'application/json',\n      dataType: 'json'\n    }).done(function(response) {\n      console.log('Response', response);\n      if (response.Warning) {\n        error.showWarning(ErrorMessages['Transpile_warning'], response.Warning);\n      }\n      if (response.Error) {\n        error.show(ErrorMessages['Transpile_error'], response.Error);\n        if (response.Location && response.Location[0] != \"?\") {\n          editor.session.setAnnotations([\n            {\n              row: response.Location[0] - 1,\n              column: response.Location[1] - 1,\n              text: \"\",\n              type: \"error\",\n            }\n          ]);\n          // FIXME change this to apply only to the error span once errors have an end location.\n          editor.session.addMarker(\n            new ace.Range(\n                response.Location[0] - 1,\n                response.Location[1] - 1,\n                response.Location[0] - 1,\n                response.Location[1],\n            ),\n            \"editor-error\", \"fullLine\", false\n          );\n        }\n        return;\n      }\n      runPythonProgram(response.Code, response.has_turtle, cb).catch(function(err) {\n        console.log(err)\n        error.show(ErrorMessages['Execute_error'], err.message);\n        reportClientError(level, code, err.message);\n      });\n    }).fail(function(xhr) {\n      console.error(xhr);\n      // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState\n      if (xhr.readyState < 4) {\n        error.show(ErrorMessages['Connection_error'], ErrorMessages['CheckInternet']);\n      } else {\n        error.show(ErrorMessages['Other_error'], ErrorMessages['ServerError']);\n      }\n    });\n\n  } catch (e: any) {\n    console.error(e);\n    error.show(ErrorMessages['Other_error'], e.message);\n  }\n}\n\n/**\n * Called when the user clicks the \"Try\" button in one of the palette buttons\n */\nexport function tryPaletteCode(exampleCode: string) {\n  var editor = ace.edit(\"editor\");\n\n  var MOVE_CURSOR_TO_END = 1;\n  editor.setValue(exampleCode + '\\n', MOVE_CURSOR_TO_END);\n  window.State.unsaved_changes = false;\n}\n\nexport function saveit(level: number | [number, string], lang: string, name: string, code: string, cb?: (err: any, resp?: any) => void) {\n  error.hide();\n\n  if (reloadOnExpiredSession ()) return;\n\n  try {\n    // If there's no session but we want to save the program, we store the program data in localStorage and redirect to /login.\n    if (! auth.profile) {\n       return modal.confirm (auth.texts['save_prompt'], function () {\n         // If there's an adventure_name, we store it together with the level, because it won't be available otherwise after signup/login.\n         if (window.State && window.State.adventure_name && !Array.isArray(level)) level = [level, window.State.adventure_name];\n         localStorage.setItem ('hedy-first-save', JSON.stringify ([level, lang, name, code]));\n         window.location.pathname = '/login';\n       });\n    }\n\n    window.State.unsaved_changes = false;\n\n    var adventure_name = window.State.adventure_name;\n    // If saving a program for an adventure after a signup/login, level is an array of the form [level, adventure_name]. In that case, we unpack it.\n    if (Array.isArray(level)) {\n       adventure_name = level [1];\n       level = level [0];\n    }\n\n    $.ajax({\n      type: 'POST',\n      url: '/programs',\n      data: JSON.stringify({\n        level: level,\n        lang:  lang,\n        name:  name,\n        code:  code,\n        adventure_name: adventure_name\n      }),\n      contentType: 'application/json',\n      dataType: 'json'\n    }).done(function(response) {\n      // The auth functions use this callback function.\n      if (cb) return response.Error ? cb (response) : cb (null, response);\n      if (response.Warning) {\n        error.showWarning(ErrorMessages['Transpile_warning'], response.Warning);\n      }\n      if (response.Error) {\n        error.show(ErrorMessages['Transpile_error'], response.Error);\n        return;\n      }\n      modal.alert (auth.texts['save_success_detail'], 4000);\n      // If we succeed, we need to update the default program name & program for the currently selected tab.\n      // To avoid this, we'd have to perform a page refresh to retrieve the info from the server again, which would be more cumbersome.\n      // The name of the program might have been changed by the server, so we use the name stated by the server.\n      $ ('#program_name').val (response.name);\n      window.State.adventures?.map (function (adventure) {\n        if (adventure.short_name === (adventure_name || 'level')) {\n          adventure.loaded_program = {name: response.name, code: code};\n        }\n      });\n    }).fail(function(err) {\n      console.error(err);\n      error.show(ErrorMessages['Connection_error'], JSON.stringify(err));\n      if (err.status === 403) {\n         localStorage.setItem ('hedy-first-save', JSON.stringify ([adventure_name ? [level, adventure_name] : level, lang, name, code]));\n         localStorage.setItem ('hedy-save-redirect', 'hedy');\n         window.location.pathname = '/login';\n      }\n    });\n  } catch (e: any) {\n    console.error(e);\n    error.show(ErrorMessages['Other_error'], e.message);\n  }\n}\n\n/**\n * The 'saveit' function, as an async function\n */\nexport function saveitP(level: number | [number, string], lang: string, name: string, code: string) {\n  return new Promise<any>((ok, ko) => {\n    saveit(level, lang, name, code, (err, response) => {\n      if (err) {\n        ko(err);\n      } else {\n        ok(response);\n      }\n    });\n  });\n}\n\nexport function viewProgramLink(programId: string) {\n  return window.location.origin + '/hedy/' + programId + '/view';\n}\n\nexport function share_program (level: number, lang: string, id: string | true, Public: boolean, reload?: boolean) {\n  if (! auth.profile) return modal.alert (auth.texts['must_be_logged']);\n\n  var share = function (id: string) {\n    $.ajax({\n      type: 'POST',\n      url: '/programs/share',\n      data: JSON.stringify({\n        id: id,\n        public: Public\n      }),\n      contentType: 'application/json',\n      dataType: 'json'\n    }).done(function(_response) {\n      // If we're sharing the program, copy the link to the clipboard.\n      if (Public) copy_to_clipboard (viewProgramLink(id), true);\n      modal.alert (Public ? auth.texts['share_success_detail'] : auth.texts['unshare_success_detail'], 4000);\n      if (reload) setTimeout (function () {location.reload ()}, 1000);\n    }).fail(function(err) {\n      console.error(err);\n      error.show(ErrorMessages['Connection_error'], JSON.stringify(err));\n    });\n  }\n\n  // If id is not true, the request comes from the programs page. In that case, we merely call the share function.\n  if (id !== true) return share (id);\n\n  // Otherwise, we save the program and then share it.\n  // Saving the program makes things way simpler for many reasons: it covers the cases where:\n  // 1) there's no saved program; 2) there's no saved program for that user; 3) the program has unsaved changes.\n  const name = `${$('#program_name').val()}`;\n  const code = get_trimmed_code();\n  return saveit(level, lang, name, code, (err: any, resp: any) => {\n      if (err && err.Warning)\n        return error.showWarning(ErrorMessages['Transpile_warning'], err.Warning);\n      if (err && err.Error)\n        return error.show(ErrorMessages['Transpile_error'], err.Error);\n      share(resp.id);\n    });\n\n}\n\nexport function copy_to_clipboard (string: string, noAlert: boolean) {\n  // https://hackernoon.com/copying-text-to-clipboard-with-javascript-df4d4988697f\n  var el = document.createElement ('textarea');\n  el.value = string;\n  el.setAttribute ('readonly', '');\n  el.style.position = 'absolute';\n  el.style.left = '-9999px';\n  document.body.appendChild (el);\n\n  const selection = document.getSelection();\n  const originalSelection = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : undefined;\n\n  el.select ();\n  document.execCommand ('copy');\n  document.body.removeChild (el);\n  if (originalSelection) {\n     document.getSelection()?.removeAllRanges ();\n     document.getSelection()?.addRange (originalSelection);\n  }\n  if (! noAlert) modal.alert (auth.texts['copy_clipboard'], 4000);\n}\n\n/**\n * Do a POST with the error to the server so we can log it\n */\nfunction reportClientError(level: string, code: string, client_error: string) {\n  $.ajax({\n    type: 'POST',\n    url: '/report_error',\n    data: JSON.stringify({\n      level: level,\n      code: code,\n      page: window.location.href,\n      client_error: client_error,\n    }),\n    contentType: 'application/json',\n    dataType: 'json'\n  });\n}\n\nwindow.onerror = function reportClientException(message, source, line_number, column_number, error) {\n\n  $.ajax({\n    type: 'POST',\n    url: '/client_exception',\n    data: JSON.stringify({\n      message: message,\n      source: source,\n      line_number: line_number,\n      column_number: column_number,\n      error: error,\n      url: window.location.href,\n      user_agent: navigator.userAgent,\n    }),\n    contentType: 'application/json',\n    dataType: 'json'\n  });\n}\n\nfunction runPythonProgram(code: string, hasTurtle: boolean, cb: () => void) {\n\n  // We keep track of how many programs are being run at the same time to avoid prints from multiple simultaneous programs.\n  // Please see note at the top of the `outf` function.\n  if (! window.State.programsInExecution) window.State.programsInExecution = 0;\n  window.State.programsInExecution++;\n\n  const outputDiv = $('#output');\n  outputDiv.empty();\n\n  Sk.pre = \"output\";\n  const turtleConfig = (Sk.TurtleGraphics || (Sk.TurtleGraphics = {}));\n  turtleConfig.target = 'turtlecanvas';\n  turtleConfig.width = 400;\n  turtleConfig.height = 300;\n  turtleConfig.worldWidth = 400;\n  turtleConfig.worldHeight = 300;\n\n  if (!hasTurtle) {\n    // There might still be a visible turtle panel. If the new program does not use the Turtle,\n    // remove it (by clearing the '#turtlecanvas' div)\n    $('#turtlecanvas').empty();\n  }\n\n  Sk.configure({\n    output: outf,\n    read: builtinRead,\n    inputfun: inputFromInlineModal,\n    inputfunTakesPrompt: true,\n    __future__: Sk.python3,\n    timeoutMsg: function () {return ErrorMessages ['Program_too_long']},\n    // Give up after three seconds of execution, there might be an infinite loop.\n    // This function can be customized later to yield different timeouts for different levels.\n    execLimit: (function () {\n      // const level = window.State.level;\n      return ((hasTurtle) ? 20000 : 3000);\n    }) ()\n  });\n\n  return Sk.misceval.asyncToPromise(function () {\n    return Sk.importMainWithBody(\"<stdin>\", false, code, true);\n  }).then(function(_mod) {\n    console.log('Program executed');\n    // Check if the program was correct but the output window is empty: Return a warning\n    if (window.State.programsInExecution === 1 && $('#output').is(':empty') && $('#turtlecanvas').is(':empty')) {\n      error.showWarning(ErrorMessages['Transpile_warning'], ErrorMessages['Empty_output']);\n    }\n    window.State.programsInExecution--;\n    if (cb) cb ();\n  }).catch(function(err) {\n    // Extract error message from error\n    console.log(err);\n    const errorMessage = errorMessageFromSkulptError(err) || JSON.stringify(err);\n    throw new Error(errorMessage);\n  });\n\n  /**\n   * Get the error messages from a Skulpt error\n   *\n   * They look like this:\n   *\n   * {\"args\":{\"v\":[{\"v\":\"name 'name' is not defined\"}]},\"traceback\":[{\"lineno\":3,\"colno\":0,\"filename\":\"<stdin>.py\"}]}\n   *\n   * Don't know why, so let's be defensive about it.\n   */\n  function errorMessageFromSkulptError(err: any) {\n    const message = err.args && err.args.v && err.args.v[0] && err.args.v[0].v;\n    return message;\n  }\n\n  function addToOutput(text: string, color: string) {\n    $('<span>').text(text).css({ color }).appendTo(outputDiv);\n  }\n\n\n  // output functions are configurable.  This one just appends some text\n  // to a pre element.\n  function outf(text: string) {\n    // If there's more than one program being executed at a time, we ignore it.\n    // This happens when a program requiring user input is suspended when the user changes the code.\n    if (window.State.programsInExecution > 1) return;\n    addToOutput(text, 'white');\n    speak(text)\n  }\n\n  function builtinRead(x: string) {\n    if (Sk.builtinFiles === undefined || Sk.builtinFiles[\"files\"][x] === undefined)\n        throw \"File not found: '\" + x + \"'\";\n    return Sk.builtinFiles[\"files\"][x];\n  }\n\n  // This method draws the prompt for asking for user input.\n  function inputFromInlineModal(prompt: string) {\n    // We give the user time to give input.\n    Sk.execStart = new Date (new Date ().getTime () + 1000 * 60 * 60 * 24 * 365);\n    $('#turtlecanvas').empty();\n    return new Promise(function(ok) {\n\n      window.State.disable_run = true;\n      $ ('#runit').css('background-color', 'gray');\n\n      const input = $('#inline-modal input[type=\"text\"]');\n      $('#inline-modal .caption').text(prompt);\n      input.val('');\n      input.attr('placeholder', prompt);\n      speak(prompt)\n\n      setTimeout(function() {\n        input.focus();\n      }, 0);\n      $('#inline-modal form').one('submit', function(event) {\n\n        window.State.disable_run = false;\n        $ ('#runit').css('background-color', '');\n\n        event.preventDefault();\n        $('#inline-modal').hide();\n        // We reset the timer to the present moment.\n        Sk.execStart = new Date ();\n        // We set a timeout for sending back the input, so that the input box is hidden before processing the program.\n        // Since processing the program might take some time, this timeout increases the responsiveness of the UI after\n        // replying to a query.\n        setTimeout (function () {\n           ok(input.val());\n           $ ('#output').focus ();\n        }, 0);\n\n        return false;\n      });\n      $('#inline-modal').show();\n    });\n  }\n}\n\nfunction speak(text: string) {\n  var selectedURI = $('#speak_dropdown').val();\n  if (!selectedURI) { return; }\n  var voice = window.speechSynthesis.getVoices().filter(v => v.voiceURI === selectedURI)[0];\n\n  if (voice) {\n    let utterance = new SpeechSynthesisUtterance(text);\n    utterance.voice = voice;\n    utterance.rate = 0.9;\n    speechSynthesis.speak(utterance);\n  }\n}\n\n(() => {\n  if (!window.speechSynthesis) { return; /* No point in even trying */ }\n  if (!window.State.lang) { return; /* Not on a code page */ }\n\n  /**\n   * Show the \"speak\" checkbox if we find that we have speech support for the\n   * current language (showing an initially hidden element is a better experience\n   * than hiding an initially shown element... arguably... ?)\n   *\n   * Also, for funzies: the speechSynthesis.getVoices() array is asynchronously\n   * populated *some time* after the page loads... and we won't know when. Keep\n   * on testing periodically until we got it or it's taken too long to finish.\n   */\n  let attempts = 0;\n  const timer = setInterval(function() {\n    attempts += 1;\n\n    const voices = findVoices(window.State.lang ?? '');\n\n    if (voices.length > 0) {\n      for (const voice of voices) {\n        $('#speak_dropdown').append($('<option>').attr('value', voice.voiceURI).text('\uD83D\uDCE3 ' + voice.name));\n      }\n\n      $('#speak_container').show();\n\n      clearInterval(timer);\n    }\n    if (attempts >= 20) {  // ~2 seconds\n      // Give up\n      clearInterval(timer);\n    }\n  }, 100);\n\n  function findVoices(lang: string) {\n    // Our own \"lang\" is *typically* just the language code, but we also have \"pt_BR\".\n    const m = lang.match(/^([a-z]+)/i);\n    if (!m) { return []; }\n    const simpleLang = m[1];\n\n    // If the feature doesn't exist in the browser, return null\n    if (!window.speechSynthesis) { return []; }\n    return window.speechSynthesis.getVoices().filter(voice => voice.lang.startsWith(simpleLang));\n  }\n})();\n\nexport function prompt_unsaved(cb: () => void) {\n  if (! window.State.unsaved_changes) return cb ();\n  // This variable avoids showing the generic native `onbeforeunload` prompt\n  window.State.no_unload_prompt = true;\n  modal.confirm(auth.texts['unsaved_changes'], cb);\n}\n\nexport function load_quiz(level: string) {\n  $('*[data-tabtarget=\"end\"]').html ('<iframe id=\"quiz-iframe\" class=\"w-full\" title=\"Quiz\" src=\"/quiz/start/' + level + '\"></iframe>');\n}\n\nexport function get_trimmed_code() {\n  try {\n    // This module may or may not exist, so let's be extra careful here.\n    const whitespace = ace.require(\"ace/ext/whitespace\");\n    whitespace.trimTrailingSpace(theGlobalEditor.session, true);\n  } catch (e) {\n    console.error(e);\n  }\n  return theGlobalEditor?.getValue();\n}\n\n", "import { modal } from './modal';\nimport { auth } from './auth';\nimport { theGlobalEditor } from './app';\n\n/**\n * Activate tabs\n *\n * Protocol:\n *\n * - Tabs consist of a TAB (the sticky-outy bit) and a TARGET\n *   (the pane that gets shown and hidden).\n *\n * - TABS should have: <... data-tab=\"SOME-ID\">\n *\n * - TARGETS should have: <... data-tabtarget=\"SOME-ID\">\n *\n * When a TAB is clicked, the TARGET with the matching id is shown\n * (and all other TARGETS in the same containing HTML element are hidden).\n *\n * The active TAB is indicated by the  '.tab-selected' class, the active\n * TARGET by the *absence* of the '.hidden' class.\n */\n$(function() {\n  function resetWindow() {\n    $ ('#warningbox').hide ();\n    $ ('#errorbox').hide ();\n    $ ('#output').empty ();\n    $ ('#turtlecanvas').empty ();\n    window.State.unsaved_changes = false;\n  }\n\n  function switchToTab(tabName: string) {\n    // Find the tab that leads to this selection, and its siblings\n    const tab = $('*[data-tab=\"' + tabName + '\"]');\n    const allTabs = tab.siblings('*[data-tab]');\n\n    // Fidn the target associated with this selection, and its siblings\n    const target = $('*[data-tabtarget=\"' + tabName + '\"]');\n    const allTargets = target.siblings('*[data-tabtarget]');\n\n    // Fix classes\n    allTabs.removeClass('tab-selected');\n    tab.addClass('tab-selected');\n\n    allTargets.addClass('hidden');\n    target.removeClass('hidden');\n\n    const adventures: Record<string, Adventure> = {};\n    window.State.adventures?.map (function(adventure: Adventure) {\n      adventures [adventure.short_name] = adventure;\n    });\n\n    resetWindow();\n\n    if (tabName === 'end') {\n      $ ('#adventures-tab').css('max-height', '100%')\n      $ ('#level-header input').hide ();\n      $ ('#editor-area').hide ();\n      return;\n    }\n    $ ('#adventures-tab').css('max-height', '20em')\n    $ ('#level-header input').show ();\n    $ ('#editor-area').show ();\n\n\n    // If the loaded program (directly requested by link with id) matches the currently selected tab, use that, overriding the loaded program that came in the adventure or level.\n    if (window.State.loaded_program && (window.State.adventure_name_onload || 'level') === tabName) {\n      $ ('#program_name').val (window.State.loaded_program.name);\n      theGlobalEditor?.setValue (window.State.loaded_program.code);\n    }\n    // If there's a loaded program for the adventure or level now selected, use it.\n    else if (adventures[tabName]?.loaded_program) {\n      $ ('#program_name').val (adventures[tabName].loaded_program!.name);\n      theGlobalEditor?.setValue (adventures[tabName].loaded_program!.code);\n    }\n    // If there's no loaded program (either requested by id or associated to the adventure/level), load defaults.\n    else if (tabName === 'level' && window.State.default_program_name && window.State.default_program) {\n      $ ('#program_name').val(window.State.default_program_name);\n      theGlobalEditor?.setValue(window.State.default_program);\n    }\n    else {\n      $ ('#program_name').val (adventures [tabName].default_save_name + ' - ' + window.State.level_title + ' ' + window.State.level);\n      theGlobalEditor?.setValue (adventures [tabName].start_code);\n    }\n\n    window.State.adventure_name = tabName === 'level' ? undefined : tabName;\n    theGlobalEditor?.clearSelection();\n    // If user wants to override the unsaved program, reset unsaved_changes\n    window.State.unsaved_changes = false;\n  }\n\n  $('*[data-tab]').click(function (e) {\n    const tab = $(e.target);\n    const tabName = tab.data('tab');\n\n    e.preventDefault ();\n\n    // If there are unsaved changes, we warn the user before changing tabs.\n    if (window.State.unsaved_changes) modal.confirm(auth.texts['unsaved_changes'], () => switchToTab(tabName));\n    else switchToTab(tabName);\n\n    // Do a 'replaceState' to add a '#anchor' to the URL\n    const hashFragment = tabName !== 'level' ? tabName : '';\n    if (window.history) { window.history.replaceState(null, '', '#' + hashFragment); }\n  });\n\n  // If we're opening an adventure from the beginning (either through a link to /hedy/adventures or through a saved program for an adventure), we click on the relevant tab.\n  // We click on `level` to load a program associated with level, if any.\n  if (window.State && window.State.adventure_name) {\n    switchToTab(window.State.adventure_name);\n  }\n  else if (window.location.hash) {\n    // If we have an '#anchor' in the URL, switch to that tab\n    const hashFragment = window.location.hash.replace(/^#/, '');\n    if (hashFragment) {\n      switchToTab(hashFragment);\n    }\n  }\n});", "/**\n * Count newlines and also estimate how the text will be line wrapped\n */\nfunction estimateLineCount(s: string) {\n  var ESTIMATED_LINE_LENGTH = 80;\n\n  var lines = s.split('\\n');\n  var wrappedLines = lines.map(x => Math.floor(x.length / ESTIMATED_LINE_LENGTH));\n\n  return sum(wrappedLines) + lines.length;\n}\n\nfunction sum(xs: number[]) {\n  let ret = 0;\n  for (const x of xs) {\n    ret += x;\n  }\n  return ret;\n}\n\n\nfunction resizeArea(el: JQuery | HTMLElement) {\n  var lines = Math.max(1, estimateLineCount($(el).val() as string));\n  var targetHeight = lines * 25 + 4;\n\n  // Allow for the case where the user made it bigger themselves\n  if ($(el).height() as number < targetHeight) {\n    $(el).css({ height: `${targetHeight}px` });\n  }\n}\n\n$('textarea').each((_i, el) => resizeArea(el)).on('input', e => {\n  const target = $(e.target);\n  if (!target.hasClass('touched')) {\n    target.addClass('touched');\n\n    // Change the 'data-name=\"xxx\"' attribute into an actual 'name=\"xxx\"' attribute\n    // so that the value is actually submitted via the form.\n    target.attr('name', target.data('name'));\n\n    recordChangeToForm(target.closest('form'));\n  }\n\n  resizeArea(target);\n});\n\n\nvar FORM_MAP = new Map();\n\nfunction recordChangeToForm(form: JQuery) {\n  var fileName = form.data('file');\n  var formData = FORM_MAP.get(fileName);\n\n  if (!formData) {\n    var button = $('button[data-file=\"' + fileName + '\"]');\n    formData = {\n      button: button,\n      changes: 0,\n    }\n\n    FORM_MAP.set(fileName, formData);\n  }\n\n  formData.changes += 1;\n  formData.button.text(`${fileName} (${formData.changes})`);\n}\n\n$('button[data-file]').click(e => {\n  var fileName = $(e.target).data('file');\n  var form = $('form[data-file=\"' + fileName + '\"]');\n  form.submit();\n});\n"],
  "mappings": "0JAAA,+WCGA,WAAY,CACV,aAAc,CAEZ,EAAE,yBAAyB,GAAG,QAAS,IAAM,KAAK,QAClD,EAAE,oBAAoB,GAAG,QAAS,IAAM,KAAK,QAC7C,EAAE,wBAAwB,GAAG,QAAS,IAAM,KAAK,QAG5C,MAAO,CACZ,EAAE,eAAe,OACjB,EAAE,kBAAkB,OACpB,OAAO,SAAS,EAAG,GAGd,MAAO,CACZ,EAAE,eAAe,OACjB,EAAE,kBAAkB,OACpB,EAAE,gBAAgB,OAClB,EAAE,iBAAiB,OACnB,EAAE,kBAAkB,OAGf,MAAM,EAAiB,EAAoB,CAChD,EAAE,qBAAqB,KAAK,GAC5B,KAAK,OACL,EAAE,gBAAgB,OACd,GAAW,WAAW,IAAM,KAAK,OAAQ,GAGxC,QAAQ,EAAiB,EAAuB,CACrD,EAAE,uBAAuB,KAAK,GAC9B,KAAK,OACL,EAAE,kBAAkB,OAGpB,EAAE,qBAAqB,IAAI,SAAS,GAAG,QAAS,IAAM,CACpD,KAAK,OACL,MAIG,OAAO,EAAiB,EAAsB,EAAgC,CACnF,EAAE,sBAAsB,KAAK,GAC7B,KAAK,OACL,EAAE,iBAAiB,OACf,GAAc,EAAE,uBAAuB,IAAI,GAG/C,EAAE,oBAAoB,IAAI,SAAS,GAAG,QAAS,IAAM,CACnD,KAAK,OAEL,GAAM,GAAQ,EAAE,uBAAuB,MACvC,AAAI,MAAO,IAAU,UACnB,EAAU,OAMd,EAKS,EAAQ,CACnB,UAAU,EAAmB,CAC3B,EAAS,GAGX,MAAO,CACL,EAAE,aAAa,OACf,EAAE,eAAe,OACjB,WAAQ,UAGV,YAAY,EAAiB,EAAiB,CAC5C,EAAE,wBAAwB,KAAK,GAC/B,EAAE,wBAAwB,KAAK,GAC/B,EAAE,eAAe,OACjB,WAAQ,UAGV,KAAK,EAAiB,EAAiB,CACrC,EAAE,sBAAsB,KAAK,GAC7B,EAAE,sBAAsB,KAAK,GAC7B,EAAE,aAAa,OACf,WAAQ,WAIC,EAAQ,GAAI,GC/EzB,YAA4B,CAC1B,MAAO,CAEL,OAAQ,CACN,CACE,MAAO,KACP,MAAO,OACP,KAAM,UAMV,eAAgB,GAAW,CACzB,CACE,MAAO,UACP,MAAO,sBAET,CACE,MAAO,YACP,MAAO,WAET,CACE,MAAO,IACP,MAAO,WAMf,GAAM,IAAS,CACb,CACE,KAAM,SACN,MAAO,EAAK,IACV,EAAgB,UAChB,IACA,EAAU,QAAS,CACjB,MAAO,EAAiB,QACxB,MAAO,UACP,KAAM,WAER,EAAU,QAAS,CACjB,MAAO,EAAiB,OACxB,MAAO,UACP,KAAM,aAIZ,CAEE,KAAM,SACN,MAAO,EAAK,IAEV,EAAgB,kBAChB,EAAW,UACX,EAAQ,UAER,MAIJ,CAEE,KAAM,SACN,MAAO,EAAK,IACV,IACA,EAAgB,kBAChB,IACA,MAGJ,CAEE,KAAM,SACN,MAAO,EAAK,IACV,IACA,IACA,IACA,IACA,MAGJ,CAEE,KAAM,SACN,MAAO,EAAK,IACV,IACA,IACA,IACA,IACA,IACA,MAGJ,CAEE,KAAM,SACN,MAAO,EAAK,IACV,IACA,IACA,IACA,IACA,IACA,IACA,MAGJ,CAEE,KAAM,SACN,MAAO,EAAK,IACV,IACA,IACA,IACA,IACA,IACA,IACA,MAGJ,CAEE,KAAM,SACN,MAAO,EAAK,IACV,IACA,IACA,IACA,IACA,IACA,IACA,MAGJ,CAEE,KAAM,cACN,MAAO,EAAK,IACV,IACA,IACA,IACA,IACA,IACA,IACA,IACA,MAGJ,CAEE,KAAM,UACN,MAAO,EAAK,IACV,IACA,IACA,IACA,IACA,IACA,IACA,MAGJ,CAEE,KAAM,UACN,MAAO,EAAK,IACV,IACA,IACA,IACA,IACA,IACA,IACA,MAMJ,CACE,KAAM,UACN,MAAO,EAAK,IACV,IACA,IACA,IACA,IACA,IACA,IACA,MAGJ,CACE,KAAM,UACN,MAAO,EAAK,IACV,IACA,IACA,IACA,IACA,IACA,IACA,MAGJ,CACE,KAAM,UACN,MAAO,EAAK,IACV,IACA,IACA,IACA,IACA,IACA,IACA,MAGJ,CACE,KAAM,UACN,MAAO,EAAK,IACV,IACA,IACA,IACA,IACA,IACA,IACA,MAGJ,CACE,KAAM,UACN,MAAO,EAAK,IACV,IACA,IACA,IACA,IACA,IACA,IACA,MAGJ,CACE,KAAM,UACN,MAAO,EAAK,IACV,IACA,IACA,IACA,IACA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",
  "names": []
}
